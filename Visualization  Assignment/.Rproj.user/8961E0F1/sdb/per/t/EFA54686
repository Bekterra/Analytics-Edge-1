{
    "contents" : "# VISUALIZING ATTRIBUTES OF PAROLE VIOLATORS\n========================================================\n```{r}\nrequire(ggplot2)\n```\nIn the crime lecture, we saw how we can use heatmaps to give a 2-dimensional representation of 3-dimensional data: we made heatmaps of crime counts by time of the day and day of the week. In this problem, we'll learn how to use histograms to show counts by one variable, and then how to visualize 3 dimensions by creating multiple histograms.\n\nWe'll use the parole data [parole.csv](https://courses.edx.org/c4x/MITx/15.071x/asset/parole.csv) from Week 3. Before, we used this data to predict parole violators. Now, let's try to get a little more insight into this dataset using histograms. As a reminder, the variables in this dataset are:\n\n* __male__ = 1 if the parolee is male, 0 if female\n* __race__ = 1 if the parolee is white, 2 otherwise\n\n* __age__ = the parolee's age in years at the time of release from prison\n\n* __state__ = a code for the parolee's state. 2 is Kentucky, 3 is Louisiana, 4 is Virginia, and 1 is any other state. These three states were selected due to having a high representation in the dataset.\n\n* __time.served__ = the number of months the parolee served in prison (limited by the inclusion criteria to not exceed 6 months).\n\n* __max.sentence__ = the maximum sentence length for all charges, in months (limited by the inclusion criteria to not exceed 18 months).\n\n* __multiple.offenses__ = 1 if the parolee was incarcerated for multiple offenses, 0 otherwise.\n\n* __crime__ = a code for the parolee's main crime leading to incarceration. 2 is larceny, 3 is drug-related crime, 4 is driving-related crime, and 1 is any other crime.\n\n* __violator__ = 1 if the parolee violated the parole, and 0 if the parolee completed the parole without violation.\n\n========================================================\n## PROBLEM 1.1 - LOADING THE DATA  (1 point possible)\nUsing the read.csv function, load the dataset parole.csv and call it parole. Since male, state, and crime are all unordered factors, convert them to factor variables using the following commands:\n\n```{r}\nparole=read.csv(\"parole.csv\")\nparole$male = as.factor(parole$male)\n\nparole$state = as.factor(parole$state)\n\nparole$crime = as.factor(parole$crime)\n```\n\nWhat fraction of parole violators are female?\n```{r}\nx=parole[ parole$violator == 1,]\nsum(2-as.numeric(x$male))/length(x$male)\n```\n\n## PROBLEM 1.2 - LOADING THE DATA  (1 point possible)\nIn this dataset, which crime is the most common in Kentucky?\n```{r}\nx=table(parole$crime[ parole$state == 2])\nnames(x) = c(\"other\", \"larceny\", \"drug\", \"driving\")\nx\n```\n\n========================================================\n## PROBLEM 2.1 - CREATING A BASIC HISTOGRAM  (1 point possible)\nRecall from lecture that in `ggplot`, we need to specify the dataset, the aesthetic, and the geometry. To create a histogram, the geometry will be `geom_histogram`. The data we'll use is `parole`, and the aesthetic will be the map from a variable to the x-axis of the histogram.\n\nCreate a histogram to find out the distribution of the age of parolees, by typing the following command in your R console:\n\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age)) + geom_histogram()\n```\n\nBy default, `geom_histogram` divides the data into 30 bins. Change the width of the bins to 5 years by adding the argument `binwidth = 5` to `geom_histogram`.\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age)) + geom_histogram(binwidth=5)\n```\n\nNote that by default, histograms create bins where the left endpoint is included in the bin, but the right endpoint isn't. So the first bin in this histogram represents parolees who are between 15 and 19 years old. The last bin in this histogram represents parolees who are between 65 and 69 years old.\n\nWhat is the age bracket with the most parolees?\n**20 -- 24**\n\n## PROBLEM 2.2 - CREATING A BASIC HISTOGRAM  (1 point possible)\nRedo the histogram, adding the following argument to the geom_histogram function: color=\"blue\". What does this do? Select all that apply.\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age)) + geom_histogram(binwidth=5, color=\"blue\")\n```\n**Changes the outline color of the bars**\n\n========================================================\n## PROBLEM 3.1 - ADDING ANOTHER DIMENSION  (1 point possible)\nNow suppose we are interested in seeing how the age distribution of male parolees compares to the age distribution of female parolees.\n\nOne option would be to create a heatmap with age on one axis and male (a binary variable in our data set) on the other axis. Another option would be to stick with histograms, but to create a separate histogram for each gender. ggplot has the ability to do this automatically using the facet_grid command.\n\nTo create separate histograms for male and female, type the following command into your R console:\n\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age)) + geom_histogram(binwidth = 5) + facet_grid(male ~ .)\n```\n\nThe histogram for female parolees is shown at the top, and the histogram for male parolees is shown at the bottom.\n\nWhat is the age bracket with the most female parolees?\n**35 -- 39**\n\n## PROBLEM 3.2 - ADDING ANOTHER DIMENSION  (1 point possible)\nNow change the facet_grid argument to be \".~male\" instead of \"male~.\". What does this do?\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age)) + geom_histogram(binwidth = 5) + facet_grid(.~male)\n```\n**Puts the histograms side-by-side instead of on top of each other.**\n\n## PROBLEM 3.3 - ADDING ANOTHER DIMENSION  (1 point possible)\nAn alternative to faceting is to simply color the different groups differently. To color the data points by group, we need to tell ggplot that a property of the data (male or not male) should be translated to an aesthetic property of the histogram. We can do this by setting the fill parameter within the aesthetic to male.\n\nRun the following command in your R console to produce a histogram where data points are colored by group:\n\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age, fill = male)) + geom_histogram(binwidth = 5)\n```\n\nSince we didn't specify colors to use, ggplot will use its default color selection. What color is the histogram for the female parolees?\n**salmon**\n\n## PROBLEM 3.4 - ADDING ANOTHER DIMENSION  (1 point possible)\nColoring the groups differently is a good way to see the breakdown of age by sex within the single, aggregated histogram. However, the bars here are stacked, meaning that the height of the blue/teal bars in each age bin represents the total number of parolees in that age bin, not just the number of parolees in that group.\n\nAn alternative to a single, stacked histogram is to create two histograms and overlay them on top of each other. This is a simple adjustment to our previous command.\n\nWe just need to:\n\n1) Tell ggplot not to stack the histograms by adding the argument `position=\"identity\"` to the geom_histogram function.\n\n2) Make the bars semi-transparent so we can see both colors by adding the argument alpha=0.5 to the geom_histogram function.\n\nRedo the plot, making both of these changes.\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = age, fill = male)) + \n    geom_histogram(binwidth = 5, position=\"identity\", alpha=0.5)\n```\n\nWhich of the following buckets contain no female paroles?\n**15 -- 19, 55 -- 59, 65 -- 69**\n\n========================================================\n## PROBLEM 4.1 - TIME SERVED  (1 point possible)\nNow let's explore another aspect of the data: the amount of time served by parolees. Create a basic histogram like the one we created in Problem 2, but this time with time.served on the x-axis. Set the bin width to one month.\n\nWhat is the most common length of time served, according to this histogram?\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = time.served)) + geom_histogram(binwidth=1)\n```\n**between 4 and 5 months**\n\n## PROBLEM 4.2 - TIME SERVED  (1 point possible)\nChange the binwidth to 0.1 months. Now what is the most common length of time served, according to the histogram?\n```{r fig.width=11, fig.height=6}\nggplot(data = parole, aes(x = time.served)) + geom_histogram(binwidth=0.1)\n```\n**Between 3.0 and 3.1 months**\n*Be careful when choosing the binwidth - it can significantly affect the interpretation of a histogram! When visualizing histograms, it is always a good idea to vary the bin size in order to understand the data at various granularities.*\n\n## PROBLEM 4.3 - TIME SERVED  (2 points possible)\nNow, suppose we suspect that it is unlikely that each type of crime has the same distribution of time served. To visualize this, change the binwidth back to 1 month, and use `facet_grid` to create a separate histogram of time.served for each value of the variable crime.\n```{r fig.width=11, fig.height=6}\nxx=parole\nlevels(xx$crime) = c(\"other\", \"larceny\", \"drugs\", \"driving\")\nggplot(data = xx, aes(x = time.served)) + geom_histogram(binwidth=1) +facet_grid(facets=.~crime)\n```\n\nWhich crime type has no observations where time served is less than one month? Recall that crime type #2 is larceny, #3 is drug-related crime, #4 is driving-related crime, and #1 is any other crime.\n**Driving-related**\n\nFor which crime does the frequency of 5-6 month prison terms exceed the frequencies of each other term length?\n**Drug-related**\n\n## PROBLEM 4.4 - TIME SERVED  (1 point possible)\nNow, instead of faceting the histograms, overlay them. Remember to set the position and alpha parameters so that the histograms are not stacked. Also, make sure to indicate that the fill aesthetic should be \"crime\".\n\n```{r fig.width=11, fig.height=6}\nxx=parole\nlevels(xx$crime) = c(\"other\", \"larceny\", \"drugs\", \"driving\")\nggplot(data = xx, aes(x = time.served, fill = crime)) + \n    geom_histogram(binwidth = 1, position=\"identity\", alpha=0.5) + scale_x_continuous(breaks=0:7)\n```\n\nIn this case, faceting seems like a better alternative. Why?\n**With four different groups, it can be hard to tell them apart when they are overlayed.**\n",
    "created" : 1398987896329.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "27|53|43|3|\n54|63|71|12|\n",
    "hash" : "1685656057",
    "id" : "EFA54686",
    "lastKnownWriteTime" : 1398991497,
    "path" : "~/Dropbox/Coursera/Analytics Edge/08.4) Assignment/Parole Violators.Rmd",
    "project_path" : "Parole Violators.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}